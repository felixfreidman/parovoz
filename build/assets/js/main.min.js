"use strict";function closeAppliedForm(){var e=document.getElementById("closeAppliedForm"),t=document.querySelector(".dark-layer");e.addEventListener("click",function(){t.classList.toggle("js--hidden")})}function inputAuthorization(){document.querySelectorAll(".form-input").forEach(function(e){var t;e.value||(t=addWarningEmptySpan(),e.classList.add("form-input--warning"),e=e.id,document.querySelector("[for=".concat(e,"]")).appendChild(t))})}function addWarningEmptySpan(){var e=document.createElement("span");return e.classList.add("empty--input"),e}function deleteWarningSpans(){document.querySelectorAll(".form-input").forEach(function(t){t.addEventListener("input",function(){var e=t.id,e=document.querySelector("[for=".concat(e,"]"));e.querySelector(".empty--input")&&(e.querySelector(".empty--input").remove(),t.classList.remove("form-input--warning"))})})}var cardsArray,createServiceTotal,_updateUserOrderField,updateTotalNumber,orderList,bookedItems,darkLayer,applyBtn,closeForm,applyFormScreen,reviews,form,select;function updateUserOrderField(){var e=document.getElementById("userOrder"),t=document.querySelectorAll(".order-item"),r=document.getElementById("orderTotalPrice").textContent,n="";t.forEach(function(e){var t=e.querySelector(".order-item__name").textContent,e=e.querySelector(".order-item__price").textContent;n="".concat(n," ").concat(t," - ").concat(e,".  ")});r="Всего: ".concat(r);n+=r,e.value=n}function makeCardsLink(){document.querySelectorAll(".container-card").forEach(function(t){t.addEventListener("click",function(){var e=t.dataset.href;window.location.href=e})})}function init(){var e=new ymaps.Map("map",{center:[56.81122355,60.72763708],zoom:14}),t=new ymaps.Placemark(e.getCenter(),{balloonContent:"г. Екатеринбург, ул. Летняя, 20",iconCaption:"г. Екатеринбург, ул. Летняя, 20"},{iconLayout:"default#image",iconImageHref:"./assets/images/content/logo.svg",iconImageSize:[30,42],iconImageOffset:[-5,-38]});e.geoObjects.add(t)}function filterFeedbacksByRating(){var e=document.querySelectorAll(".feedback-item");$("#slider").slider("values");e.forEach(function(e){e.querySelector(".amount").textContent!=$("#starRating").val()?e.classList.add("js--hidden"):e.classList.remove("js--hidden")})}function filterFeedbacksByName(t){document.querySelectorAll(".feedback-item").forEach(function(e){e.querySelector(".feedback-item__caption").textContent!=t?e.classList.add("js--hidden"):e.classList.remove("js--hidden")})}$(function(){$("#orderForm").on("submit",function(e){e.preventDefault();var t=$("#userName").val(),r=$("#userPhone").val(),n=$("#userEmail").val(),e=$("#userOrder").val(),o=document.querySelector(".order-button");o.textContent="Подтверждаем",$.ajax({type:"post",url:"/wp-admin/admin-ajax.php",data:{action:"ajax_form",name:t,phone:r,mail:n,order:e},success:function(e){o.textContent=e,setTimeout(function(){window.location.href="https://parovoz.yurin.biz/services"},1200)}})})}),$(function(){$(".apply-form").on("submit",function(e){e.preventDefault();var t=$("#reviewName").val(),e=$("#description").val();document.querySelector(".form-button").textContent="Подтверждаем",$.ajax({type:"post",url:"/wp-admin/admin-ajax.php",data:{action:"review_form",name:t,description:e},success:function(e){$(".dark-layer").html(e),closeAppliedForm()}})})}),$(".order-button").on("click",function(){inputAuthorization()}),deleteWarningSpans(),Storage.prototype.setObj=function(e,t){return this.setItem(e,JSON.stringify(t))},Storage.prototype.getObj=function(e){return JSON.parse(this.getItem(e))},document.querySelector(".article-card")&&(cardsArray=document.querySelectorAll(".article-card")).forEach(function(t){t.addEventListener("mouseover",function(){var e=(e=t.style.background).replace("linear-gradient(360deg, rgba(26, 47, 68, 0.9) 0%, rgba(26, 47, 68, 0) 100%)","linear-gradient( 360deg, rgba(212, 37, 21, 0.8) 0%, rgba(212, 37, 21, 0) 100%)");t.style.background=e}),t.addEventListener("mouseout",function(){var e=(e=t.style.background).replace("linear-gradient(360deg, rgba(212, 37, 21, 0.8) 0%, rgba(212, 37, 21, 0) 100%)","linear-gradient(360deg, rgba(26, 47, 68, 0.9) 0%, rgba(26, 47, 68, 0) 100%)");t.style.background=e})}),document.getElementById("orderDate")&&(document.getElementById("orderDate").valueAsDate=new Date),window.location.href.includes("book")&&$(document).ready(function(){$("#userPhone").inputmask()}),document.querySelector(".container-card")&&setTimeout(makeCardsLink,300),window.location.href.includes("cart")&&(createServiceTotal=function(e,t,r){return'\n      <div class="order-item order-item--service" id="totalOrderID'.concat(r,'">\n        <div class="order-item__name" id="orderServiceName">').concat(e,'</div>\n        <div class="order-item__bar"> </div>\n        <div class="order-item__price" id="orderServicePrice">').concat(t," <span>₽</span></div>\n    </div>\n    ")},_updateUserOrderField=function(){var e=document.getElementById("userOrder"),t=document.querySelectorAll(".order-item"),r=document.getElementById("orderTotalPrice").textContent,n="";t.forEach(function(e){var t=e.querySelector(".order-item__name").textContent,e=e.querySelector(".order-item__price").textContent;n="".concat(n," ").concat(t," - ").concat(e,".  ")});r="Всего: ".concat(r);n+=r,e.value=n,console.log(e.value)},updateTotalNumber=function(){var e,t,r;document.querySelectorAll(".order-item__price")?(e=document.querySelectorAll(".order-item__price"),t=document.getElementById("orderTotalPrice"),r=0,e.forEach(function(e){e=parseInt(e.textContent);r+=e}),t.childNodes[0].nodeValue=r+" "):document.getElementById("orderTotalPrice").childNodes[0].nodeValue="0 "},orderList=document.querySelector(".order-list"),(bookedItems=document.querySelectorAll(".order-container")).forEach(function(e,t){var r=e.querySelector(".order-header").querySelector("a").textContent,e=e.querySelector(".order-cost").querySelector("span").querySelector("bdi").textContent;e=(e=e.match(/\d+/g))[0]+"";t=createServiceTotal(r,e,t);orderList.insertAdjacentHTML("beforeend",t)}),setTimeout(updateTotalNumber,100),setTimeout(_updateUserOrderField,100),$(document).ready(function(){$("#userPhone").inputmask()})),document.querySelector(".add-feedback")&&(darkLayer=document.querySelector(".dark-layer"),applyBtn=document.querySelector(".add-feedback"),closeForm=document.getElementById("closeForm"),applyFormScreen=document.getElementById("applyForm"),applyBtn.addEventListener("click",function(){darkLayer.classList.toggle("js--hidden")}),closeForm.addEventListener("click",function(){darkLayer.classList.toggle("js--hidden")}),window.onclick=function(e){e.target==darkLayer&&darkLayer.classList.toggle("js--hidden")}),window.location.href.includes("feedback")&&(reviews=document.querySelectorAll(".feedback-item")).forEach(function(e){var t=e.querySelector(".feedback-item__content").textContent,r=e.querySelector(".feedback-item__caption"),n=e.querySelector(".amount"),o=t.substring(t.indexOf("star")-1,t.indexOf("star")),a=t.substring(t.indexOf("bath")-3,t.indexOf("bath"));switch(t=(t=t.replace("".concat(a,"bath"),"")).replace("".concat(o,"star"),""),e.querySelector(".feedback-item__content").textContent=t,n.textContent=o,r.textContent=a){case"Ура":r.textContent="Уральская";break;case"Охо":r.textContent="Охотничья";break;case"Ямс":r.textContent="Ямская";break;case"Рыб":r.textContent="Рыбацкая";break;case"Раз":r.textContent="Раздольная";break;case"Сем":r.textContent="Семейная";break;case"Сиб":r.textContent="Сибирская";break;case"Лес":r.textContent="Лесная";break;case"Хут":r.textContent="Хуторок"}}),ymaps.ready(init),jQuery("#slider").slider({animate:"fast",max:5,min:1,step:1,range:!0,values:[1,5],slide:function(e,t){$("#starRating").val(t.value),$(".controls-section__button").removeClass("js--hidden"),filterFeedbacksByRating()}}),document.getElementById("ratingForm")&&(form=document.getElementById("ratingForm"),select=document.getElementById("bathType"),form.addEventListener("reset",function(){$("#slider").slider("values",[1,5]),$(".controls-section__button").addClass("js--hidden"),document.querySelectorAll(".feedback-item").forEach(function(e){e.classList.remove("js--hidden")})}),select.addEventListener("change",function(){$(".controls-section__button").removeClass("js--hidden"),filterFeedbacksByName($(select).val())}));var swiper=new Swiper("#workerSwiper",{direction:"horizontal",loop:!0,speed:400,spaceBetween:34,effect:"cards",slidesPerView:"4",swipeHandler:".swiper-wrapper"}),swiperImages=document.querySelectorAll(".bathroom-preview"),imgLinkArray=new Array,returnValue=0;swiperImages.forEach(function(e){e=e.src.replace("http://localhost:3000","."),e='<img class="swiper-preview swiper-pagination-bullet" src='.concat(e,">");imgLinkArray.push(e)});var fancySwiper=new Swiper("#fancySwiper",{direction:"horizontal",loop:!0,speed:500,spaceBetween:34,effect:"fade",fadeEffect:{crossFade:!0},slidesPerView:"1",swipeHandler:".swiper-wrapper",pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(e){return imgLinkArray[e]}}}),cafeSwiper=new Swiper("#cafeSwiper",{direction:"horizontal",loop:!1,speed:400,spaceBetween:24,effect:"cards",slidesPerView:"2",pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),actionSwiper=new Swiper("#actionSwiper",{direction:"horizontal",loop:!0,speed:400,spaceBetween:24,effect:"cards",slidesPerView:"2",navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFqYXguanMiLCJjb21tb24uanMiLCJmZWVkYmFjay5qcyIsInN3aXBlci5qcyJdLCJuYW1lcyI6WyJjbG9zZUFwcGxpZWRGb3JtIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImRhcmtMYXllcl9fbG9jYWwiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImlucHV0QXV0aG9yaXphdGlvbiIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiaW5wdXQiLCJzcGFuIiwidmFsdWUiLCJhZGRXYXJuaW5nRW1wdHlTcGFuIiwiYWRkIiwiaW5wdXRJRCIsImlkIiwiY29uY2F0IiwiYXBwZW5kQ2hpbGQiLCJ3YXJuaW5nRW1wdHlTcGFuIiwiY3JlYXRlRWxlbWVudCIsImRlbGV0ZVdhcm5pbmdTcGFucyIsImlucHV0TGFiZWwiLCJyZW1vdmUiLCJjYXJkc0FycmF5IiwiY3JlYXRlU2VydmljZVRvdGFsIiwidXBkYXRlVXNlck9yZGVyRmllbGQiLCJ1cGRhdGVUb3RhbE51bWJlciIsIm9yZGVyTGlzdCIsImJvb2tlZEl0ZW1zIiwiZGFya0xheWVyIiwiYXBwbHlCdG4iLCJjbG9zZUZvcm0iLCJhcHBseUZvcm1TY3JlZW4iLCJyZXZpZXdzIiwiZm9ybSIsInNlbGVjdCIsInVzZXJPcmRlckZpZWxkIiwidXNlck9yZGVyTGlzdCIsInRvdGFsUHJpY2UiLCJ0ZXh0Q29udGVudCIsIm9yZGVyU3RyaW5nIiwib3JkZXIiLCJvcmRlck5hbWUiLCJvcmRlclByaWNlIiwidG90YWxTdHJpbmciLCJtYWtlQ2FyZHNMaW5rIiwiY2FyZCIsImxpbmsiLCJkYXRhc2V0IiwiaHJlZiIsIndpbmRvdyIsImxvY2F0aW9uIiwiaW5pdCIsIm15TWFwIiwieW1hcHMiLCJNYXAiLCJjZW50ZXIiLCJ6b29tIiwibXlQbGFjZW1hcmsiLCJQbGFjZW1hcmsiLCJnZXRDZW50ZXIiLCJiYWxsb29uQ29udGVudCIsImljb25DYXB0aW9uIiwiaWNvbkxheW91dCIsImljb25JbWFnZUhyZWYiLCJpY29uSW1hZ2VTaXplIiwiaWNvbkltYWdlT2Zmc2V0IiwiZ2VvT2JqZWN0cyIsImZpbHRlckZlZWRiYWNrc0J5UmF0aW5nIiwiYWxsRmVlZGJhY2tzIiwiJCIsInNsaWRlciIsImZlZWRiYWNrIiwidmFsIiwiZmlsdGVyRmVlZGJhY2tzQnlOYW1lIiwiY2hlY2tlZFZhbHVlIiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJuYW1lIiwicGhvbmUiLCJtYWlsIiwib3JkZXJCdXR0b24iLCJhamF4IiwidHlwZSIsInVybCIsImRhdGEiLCJhY3Rpb24iLCJzdWNjZXNzIiwicmVzcG9uc2UiLCJzZXRUaW1lb3V0IiwiZGVzY3JpcHRpb24iLCJodG1sIiwiU3RvcmFnZSIsInByb3RvdHlwZSIsInNldE9iaiIsImtleSIsIm9iaiIsInRoaXMiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldE9iaiIsInBhcnNlIiwiZ2V0SXRlbSIsImJhY2tncm91bmQiLCJzdHlsZSIsInJlcGxhY2UiLCJ2YWx1ZUFzRGF0ZSIsIkRhdGUiLCJpbmNsdWRlcyIsInJlYWR5IiwiaW5wdXRtYXNrIiwicHJpY2UiLCJjb25zb2xlIiwibG9nIiwiYWxsT3JkZXJzTnVtcyIsInRvdGFsTnVtIiwidG90YWxTdW0iLCJyZWFsUHJpY2UiLCJwYXJzZUludCIsImNoaWxkTm9kZXMiLCJub2RlVmFsdWUiLCJpbmRleCIsInNlcnZpY2VOYW1lIiwic2VydmljZVByaWNlIiwibWF0Y2giLCJ0b3RhbE9yZGVyIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwib25jbGljayIsImV2ZW50IiwidGFyZ2V0IiwicmV2aWV3IiwicmV2aWV3X2NvbnRlbnQiLCJiYXRoX3R5cGVfbmFtZSIsInN0YXJfcmF0aW5nX2Ftb3VudCIsInN0YXJfcmF0aW5nIiwic3Vic3RyaW5nIiwiaW5kZXhPZiIsImJhdGhfdHlwZSIsImpRdWVyeSIsImFuaW1hdGUiLCJtYXgiLCJtaW4iLCJzdGVwIiwicmFuZ2UiLCJ2YWx1ZXMiLCJzbGlkZSIsInVpIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInN3aXBlciIsIlN3aXBlciIsImRpcmVjdGlvbiIsImxvb3AiLCJzcGVlZCIsInNwYWNlQmV0d2VlbiIsImVmZmVjdCIsInNsaWRlc1BlclZpZXciLCJzd2lwZUhhbmRsZXIiLCJzd2lwZXJJbWFnZXMiLCJpbWdMaW5rQXJyYXkiLCJBcnJheSIsInJldHVyblZhbHVlIiwiaW1hZ2UiLCJpbWFnZVNyYyIsInNyYyIsInB1c2giLCJmYW5jeVN3aXBlciIsImZhZGVFZmZlY3QiLCJjcm9zc0ZhZGUiLCJwYWdpbmF0aW9uIiwiZWwiLCJjbGlja2FibGUiLCJyZW5kZXJCdWxsZXQiLCJjYWZlU3dpcGVyIiwibmF2aWdhdGlvbiIsIm5leHRFbCIsInByZXZFbCIsImFjdGlvblN3aXBlciJdLCJtYXBwaW5ncyI6ImFBcURBLFNBQUFBLG1CQUNBLElBQUFBLEVBQUFDLFNBQUFDLGVBQUEsb0JBQ0FDLEVBQUFGLFNBQUFHLGNBQUEsZUFDQUosRUFBQUssaUJBQUEsUUFBQSxXQUNBRixFQUFBRyxVQUFBQyxPQUFBLGdCQVNBLFNBQUFDLHFCQUNBUCxTQUFBUSxpQkFBQSxlQUNBQyxRQUFBLFNBQUFDLEdBQ0EsSUFDQUMsRUFEQUQsRUFBQUUsUUFDQUQsRUFBQUUsc0JBQ0FILEVBQUFMLFVBQUFTLElBQUEsdUJBQ0FDLEVBQUFMLEVBQUFNLEdBQ0FoQixTQUFBRyxjQUFBLFFBQUFjLE9BQUFGLEVBQUEsTUFDQUcsWUFBQVAsTUFNQSxTQUFBRSxzQkFDQSxJQUFBTSxFQUFBbkIsU0FBQW9CLGNBQUEsUUFFQSxPQURBRCxFQUFBZCxVQUFBUyxJQUFBLGdCQUNBSyxFQUdBLFNBQUFFLHFCQUNBckIsU0FBQVEsaUJBQUEsZUFDQUMsUUFBQSxTQUFBQyxHQUNBQSxFQUFBTixpQkFBQSxRQUFBLFdBQ0EsSUFBQVcsRUFBQUwsRUFBQU0sR0FDQU0sRUFBQXRCLFNBQUFHLGNBQUEsUUFBQWMsT0FBQUYsRUFBQSxNQUNBTyxFQUFB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NERBQUFuSixPQUFBcUosRUFBQSxLQUNBSixhQUFBTSxLQUFBSixLQUdBLElBQUFLLFlBQUEsSUFBQWhCLE9BQUEsZUFBQSxDQUNBQyxVQUFBLGFBQ0FDLE1BQUEsRUFDQUMsTUFBQSxJQUNBQyxhQUFBLEdBQ0FDLE9BQUEsT0FDQVksV0FBQSxDQUNBQyxXQUFBLEdBRUFaLGNBQUEsSUFDQUMsYUFBQSxrQkFDQVksV0FBQSxDQUNBQyxHQUFBLHFCQUNBQyxXQUFBLEVBQ0FDLGFBQUEsU0FBQW5ELEdBQ0EsT0FBQXNDLGFBQUF0QyxPQUtBb0QsV0FBQSxJQUFBdkIsT0FBQSxjQUFBLENBRUFDLFVBQUEsYUFDQUMsTUFBQSxFQUNBQyxNQUFBLElBQ0FDLGFBQUEsR0FDQUMsT0FBQSxRQUNBQyxjQUFBLElBRUFhLFdBQUEsQ0FDQUMsR0FBQSxxQkFDQUMsV0FBQSxHQUlBRyxXQUFBLENBQ0FDLE9BQUEsc0JBQ0FDLE9BQUEseUJBSUFDLGFBQUEsSUFBQTNCLE9BQUEsZ0JBQUEsQ0FFQUMsVUFBQSxhQUNBQyxNQUFBLEVBQ0FDLE1BQUEsSUFDQUMsYUFBQSxHQUNBQyxPQUFBLFFBQ0FDLGNBQUEsSUFHQWtCLFdBQUEsQ0FDQUMsT0FBQSxzQkFDQUMsT0FBQSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQUpBWC3Qt9Cw0L/RgNC+0YEg0LTQu9GPINC+0YLQv9GA0LDQstC60Lgg0YHQvtC+0LHRidC10L3QuNC5INC90LAg0L/QvtGH0YLRgywg0LrQvtGC0L7RgNCw0Y8g0YPQutCw0LfQsNC90LAg0LIg0LDQtNC80LjQvdC60LUg0YHQsNC50YLQsFxuJChmdW5jdGlvbiAoKSB7XG4gICAgJChcIiNvcmRlckZvcm1cIikub24oXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgbmFtZSA9ICQoXCIjdXNlck5hbWVcIikudmFsKCk7XG4gICAgICAgIHZhciBwaG9uZSA9ICQoXCIjdXNlclBob25lXCIpLnZhbCgpO1xuICAgICAgICB2YXIgbWFpbCA9ICQoXCIjdXNlckVtYWlsXCIpLnZhbCgpO1xuICAgICAgICB2YXIgb3JkZXIgPSAkKFwiI3VzZXJPcmRlclwiKS52YWwoKTtcbiAgICAgICAgdmFyIG9yZGVyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm9yZGVyLWJ1dHRvbicpO1xuICAgICAgICBvcmRlckJ1dHRvbi50ZXh0Q29udGVudCA9IFwi0J/QvtC00YLQstC10YDQttC00LDQtdC8XCI7XG5cbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHR5cGU6IFwicG9zdFwiLFxuICAgICAgICAgICAgdXJsOiBcIi93cC1hZG1pbi9hZG1pbi1hamF4LnBocFwiLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogXCJhamF4X2Zvcm1cIixcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgIHBob25lOiBwaG9uZSxcbiAgICAgICAgICAgICAgICBtYWlsOiBtYWlsLFxuICAgICAgICAgICAgICAgIG9yZGVyOiBvcmRlcixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBvcmRlckJ1dHRvbi50ZXh0Q29udGVudCA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiaHR0cHM6Ly9wYXJvdm96Lnl1cmluLmJpei9zZXJ2aWNlc1wiO1xuICAgICAgICAgICAgICAgIH0sIDEyMDApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTtcbiQoZnVuY3Rpb24gKCkge1xuICAgICQoXCIuYXBwbHktZm9ybVwiKS5vbihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBuYW1lID0gJChcIiNyZXZpZXdOYW1lXCIpLnZhbCgpO1xuICAgICAgICB2YXIgZGVzY3JpcHRpb24gPSAkKFwiI2Rlc2NyaXB0aW9uXCIpLnZhbCgpO1xuICAgICAgICB2YXIgb3JkZXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybS1idXR0b24nKTtcbiAgICAgICAgb3JkZXJCdXR0b24udGV4dENvbnRlbnQgPSBcItCf0L7QtNGC0LLQtdGA0LbQtNCw0LXQvFwiO1xuXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB0eXBlOiBcInBvc3RcIixcbiAgICAgICAgICAgIHVybDogXCIvd3AtYWRtaW4vYWRtaW4tYWpheC5waHBcIixcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IFwicmV2aWV3X2Zvcm1cIixcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkKFwiLmRhcmstbGF5ZXJcIikuaHRtbChyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgY2xvc2VBcHBsaWVkRm9ybSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTtcbmZ1bmN0aW9uIGNsb3NlQXBwbGllZEZvcm0oKSB7XG4gICAgY29uc3QgY2xvc2VBcHBsaWVkRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2xvc2VBcHBsaWVkRm9ybVwiKTtcbiAgICBjb25zdCBkYXJrTGF5ZXJfX2xvY2FsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kYXJrLWxheWVyXCIpO1xuICAgIGNsb3NlQXBwbGllZEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgZGFya0xheWVyX19sb2NhbC5jbGFzc0xpc3QudG9nZ2xlKFwianMtLWhpZGRlblwiKTtcbiAgICB9KTtcbn1cbi8vINCf0YDQvtCy0LXRgNGP0LXQvCwg0YfRgtC+INCy0YHQtSDQv9C+0LvRjyDQstCw0LbQvdGL0LUg0LfQsNC/0L7Qu9C90LXQvdGLXG4kKFwiLm9yZGVyLWJ1dHRvblwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBpbnB1dEF1dGhvcml6YXRpb24oKTtcbn0pO1xuLy8gICBcbi8vINCh0LDQvNCwINGE0YPQvdC60YbQuNGPINC/0YDQvtCy0LXRgNC60Lgg0L/QvtC70LXQuSDQuCDQtNC+0LHQsNCy0LvQtdC90LjRjyDQtNC+0L/QvtC70L3QuNGC0LXQu9GM0L3Ri9GFINGB0LLQvtC50YHRgtCyINC/0L7Qu9GOXG5mdW5jdGlvbiBpbnB1dEF1dGhvcml6YXRpb24oKSB7XG4gICAgY29uc3QgaW5wdXRzQXJyYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm0taW5wdXRcIik7XG4gICAgaW5wdXRzQXJyYXkuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgICAgaWYgKCFpbnB1dC52YWx1ZSkge1xuICAgICAgICAgICAgY29uc3Qgc3BhbiA9IGFkZFdhcm5pbmdFbXB0eVNwYW4oKTtcbiAgICAgICAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQoXCJmb3JtLWlucHV0LS13YXJuaW5nXCIpO1xuICAgICAgICAgICAgY29uc3QgaW5wdXRJRCA9IGlucHV0LmlkO1xuICAgICAgICAgICAgY29uc3QgaW5wdXRMYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtmb3I9JHtpbnB1dElEfV1gKTtcbiAgICAgICAgICAgIGlucHV0TGFiZWwuYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLy8g0J3QtSDRhdC+0YLQtdC7INC/0LXRgNC10LPRgNGD0LbQsNGC0Ywg0YTRg9C90LrRhtC40Y8g0L/RgNC+0LLQtdGA0LrQuCDQuCDQv9GA0L7Rh9C10LUsINC/0L7RjdGC0L7QvNGDINGB0L7Qt9C00LDQvdC40LUg0L7RgtC00LXQu9GM0L3QvtCz0L4g0YHQv9Cw0L3QsCDQstGL0L3QtdGBINC+0YLQtNC10LvRjNC90L5cbmZ1bmN0aW9uIGFkZFdhcm5pbmdFbXB0eVNwYW4oKSB7XG4gICAgY29uc3Qgd2FybmluZ0VtcHR5U3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIHdhcm5pbmdFbXB0eVNwYW4uY2xhc3NMaXN0LmFkZChcImVtcHR5LS1pbnB1dFwiKTtcbiAgICByZXR1cm4gd2FybmluZ0VtcHR5U3Bhbjtcbn1cbi8vINCa0LDQuiDRgtC+0LvRjNC60L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GMINGA0LXRiNC40LvRgdGPINCy0LLQtdGB0YLQuCDQtNCw0L3QvdGL0LUsINC10YHQu9C4INCx0YvQu9C+INC/0YDQtdC00YPQv9GA0LXQttC00LXQvdC40LUg0Y8g0YPQtNCw0LvRj9GOINC/0YDQtdC00YPQv9GA0LXQttC00LXQvdC40Y8g0LLRgdGP0LrQuNC1XG5mdW5jdGlvbiBkZWxldGVXYXJuaW5nU3BhbnMoKSB7XG4gICAgY29uc3QgaW5wdXRzQXJyYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm0taW5wdXRcIik7XG4gICAgaW5wdXRzQXJyYXkuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0SUQgPSBpbnB1dC5pZDtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0TGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZm9yPSR7aW5wdXRJRH1dYCk7XG4gICAgICAgICAgICBpZiAoaW5wdXRMYWJlbC5xdWVyeVNlbGVjdG9yKFwiLmVtcHR5LS1pbnB1dFwiKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNlcnRhaW5TcGFuID0gaW5wdXRMYWJlbC5xdWVyeVNlbGVjdG9yKFwiLmVtcHR5LS1pbnB1dFwiKTtcbiAgICAgICAgICAgICAgICBjZXJ0YWluU3Bhbi5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybS1pbnB1dC0td2FybmluZ1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbmRlbGV0ZVdhcm5pbmdTcGFucygpO1xuXG4iLCJTdG9yYWdlLnByb3RvdHlwZS5zZXRPYmogPSBmdW5jdGlvbiAoa2V5LCBvYmopIHtcbiAgcmV0dXJuIHRoaXMuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KG9iaikpXG59XG5TdG9yYWdlLnByb3RvdHlwZS5nZXRPYmogPSBmdW5jdGlvbiAoa2V5KSB7XG4gIHJldHVybiBKU09OLnBhcnNlKHRoaXMuZ2V0SXRlbShrZXkpKVxufVxuXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hcnRpY2xlLWNhcmRcIikpIHtcbiAgY29uc3QgY2FyZHNBcnJheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYXJ0aWNsZS1jYXJkXCIpO1xuICBjYXJkc0FycmF5LmZvckVhY2goKGNhcmQpID0+IHtcbiAgICBjYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgKCkgPT4ge1xuICAgICAgbGV0IGJhY2tncm91bmQgPSBjYXJkLnN0eWxlLmJhY2tncm91bmQ7XG4gICAgICBiYWNrZ3JvdW5kID0gYmFja2dyb3VuZC5yZXBsYWNlKFxuICAgICAgICBcImxpbmVhci1ncmFkaWVudCgzNjBkZWcsIHJnYmEoMjYsIDQ3LCA2OCwgMC45KSAwJSwgcmdiYSgyNiwgNDcsIDY4LCAwKSAxMDAlKVwiLFxuICAgICAgICBcImxpbmVhci1ncmFkaWVudCggMzYwZGVnLCByZ2JhKDIxMiwgMzcsIDIxLCAwLjgpIDAlLCByZ2JhKDIxMiwgMzcsIDIxLCAwKSAxMDAlKVwiXG4gICAgICApO1xuICAgICAgY2FyZC5zdHlsZS5iYWNrZ3JvdW5kID0gYmFja2dyb3VuZDtcbiAgICB9KTtcbiAgICBjYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCAoKSA9PiB7XG4gICAgICBsZXQgYmFja2dyb3VuZCA9IGNhcmQuc3R5bGUuYmFja2dyb3VuZDtcbiAgICAgIGJhY2tncm91bmQgPSBiYWNrZ3JvdW5kLnJlcGxhY2UoXG4gICAgICAgIFwibGluZWFyLWdyYWRpZW50KDM2MGRlZywgcmdiYSgyMTIsIDM3LCAyMSwgMC44KSAwJSwgcmdiYSgyMTIsIDM3LCAyMSwgMCkgMTAwJSlcIixcbiAgICAgICAgXCJsaW5lYXItZ3JhZGllbnQoMzYwZGVnLCByZ2JhKDI2LCA0NywgNjgsIDAuOSkgMCUsIHJnYmEoMjYsIDQ3LCA2OCwgMCkgMTAwJSlcIlxuICAgICAgKTtcbiAgICAgIGNhcmQuc3R5bGUuYmFja2dyb3VuZCA9IGJhY2tncm91bmQ7XG4gICAgfSk7XG4gIH0pO1xufVxuaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3JkZXJEYXRlXCIpKSB7XG5cbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29yZGVyRGF0ZScpLnZhbHVlQXNEYXRlID0gbmV3IERhdGUoKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlVXNlck9yZGVyRmllbGQoKSB7XG4gIGNvbnN0IHVzZXJPcmRlckZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VyT3JkZXJcIik7XG4gIGNvbnN0IHVzZXJPcmRlckxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm9yZGVyLWl0ZW1cIik7XG4gIGNvbnN0IHRvdGFsUHJpY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm9yZGVyVG90YWxQcmljZVwiKS50ZXh0Q29udGVudDtcbiAgbGV0IG9yZGVyU3RyaW5nID0gJyc7XG4gIHVzZXJPcmRlckxpc3QuZm9yRWFjaChvcmRlciA9PiB7XG4gICAgY29uc3Qgb3JkZXJOYW1lID0gb3JkZXIucXVlcnlTZWxlY3RvcihcIi5vcmRlci1pdGVtX19uYW1lXCIpLnRleHRDb250ZW50O1xuICAgIGNvbnN0IG9yZGVyUHJpY2UgPSBvcmRlci5xdWVyeVNlbGVjdG9yKFwiLm9yZGVyLWl0ZW1fX3ByaWNlXCIpLnRleHRDb250ZW50O1xuICAgIG9yZGVyU3RyaW5nID0gYCR7b3JkZXJTdHJpbmd9ICR7b3JkZXJOYW1lfSAtICR7b3JkZXJQcmljZX0uICBgXG4gIH0pO1xuICBsZXQgdG90YWxTdHJpbmcgPSBg0JLRgdC10LPQvjogJHt0b3RhbFByaWNlfWA7XG4gIG9yZGVyU3RyaW5nICs9IHRvdGFsU3RyaW5nO1xuICB1c2VyT3JkZXJGaWVsZC52YWx1ZSA9IG9yZGVyU3RyaW5nO1xufVxuXG5cbmlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcyhcImJvb2tcIikpIHtcblxuICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgJChcIiN1c2VyUGhvbmVcIikuaW5wdXRtYXNrKCk7XG4gIH0pO1xuXG59XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lci1jYXJkXCIpKSB7XG4gIHNldFRpbWVvdXQobWFrZUNhcmRzTGluaywgMzAwKVxufVxuXG5mdW5jdGlvbiBtYWtlQ2FyZHNMaW5rKCkge1xuICBjb25zdCBjYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGFpbmVyLWNhcmRcIik7XG5cbiAgY2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICBjYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3QgbGluayA9IGNhcmQuZGF0YXNldC5ocmVmO1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBsaW5rO1xuICAgIH0pXG4gIH0pXG59XG5cblxuXG5pZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoXCJjYXJ0XCIpKSB7XG4gIHZhciBvcmRlckxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm9yZGVyLWxpc3RcIik7XG4gIGNvbnN0IGJvb2tlZEl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5vcmRlci1jb250YWluZXJcIilcbiAgYm9va2VkSXRlbXMuZm9yRWFjaCgob3JkZXIsIGluZGV4KSA9PiB7XG4gICAgY29uc3Qgc2VydmljZU5hbWUgPSBvcmRlci5xdWVyeVNlbGVjdG9yKCcub3JkZXItaGVhZGVyJykucXVlcnlTZWxlY3RvcihcImFcIikudGV4dENvbnRlbnQ7XG4gICAgbGV0IHNlcnZpY2VQcmljZSA9IG9yZGVyLnF1ZXJ5U2VsZWN0b3IoJy5vcmRlci1jb3N0JykucXVlcnlTZWxlY3RvcihcInNwYW5cIikucXVlcnlTZWxlY3RvcihcImJkaVwiKS50ZXh0Q29udGVudDtcbiAgICBzZXJ2aWNlUHJpY2UgPSBzZXJ2aWNlUHJpY2UubWF0Y2goL1xcZCsvZyk7XG4gICAgc2VydmljZVByaWNlID0gc2VydmljZVByaWNlWzBdICsgJyc7XG4gICAgY29uc3Qgc2VydmljZUNvdW50ZXIgPSBpbmRleDtcblxuICAgIGNvbnN0IHRvdGFsT3JkZXIgPSBjcmVhdGVTZXJ2aWNlVG90YWwoc2VydmljZU5hbWUsIHNlcnZpY2VQcmljZSwgaW5kZXgpO1xuICAgIG9yZGVyTGlzdC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIHRvdGFsT3JkZXIpO1xuICB9KVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVNlcnZpY2VUb3RhbChuYW1lLCBwcmljZSwgaWQpIHtcbiAgICBjb25zdCBIVE1MU3RyaW5nID1cbiAgICAgIGBcbiAgICAgIDxkaXYgY2xhc3M9XCJvcmRlci1pdGVtIG9yZGVyLWl0ZW0tLXNlcnZpY2VcIiBpZD1cInRvdGFsT3JkZXJJRCR7aWR9XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJvcmRlci1pdGVtX19uYW1lXCIgaWQ9XCJvcmRlclNlcnZpY2VOYW1lXCI+JHtuYW1lfTwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwib3JkZXItaXRlbV9fYmFyXCI+IDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwib3JkZXItaXRlbV9fcHJpY2VcIiBpZD1cIm9yZGVyU2VydmljZVByaWNlXCI+JHtwcmljZX0gPHNwYW4+4oK9PC9zcGFuPjwvZGl2PlxuICAgIDwvZGl2PlxuICAgIGA7XG4gICAgcmV0dXJuIEhUTUxTdHJpbmc7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVVc2VyT3JkZXJGaWVsZCgpIHtcbiAgICBjb25zdCB1c2VyT3JkZXJGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlck9yZGVyXCIpO1xuICAgIGNvbnN0IHVzZXJPcmRlckxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm9yZGVyLWl0ZW1cIik7XG4gICAgY29uc3QgdG90YWxQcmljZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3JkZXJUb3RhbFByaWNlXCIpLnRleHRDb250ZW50O1xuICAgIGxldCBvcmRlclN0cmluZyA9ICcnO1xuICAgIHVzZXJPcmRlckxpc3QuZm9yRWFjaChvcmRlciA9PiB7XG4gICAgICBjb25zdCBvcmRlck5hbWUgPSBvcmRlci5xdWVyeVNlbGVjdG9yKFwiLm9yZGVyLWl0ZW1fX25hbWVcIikudGV4dENvbnRlbnQ7XG4gICAgICBjb25zdCBvcmRlclByaWNlID0gb3JkZXIucXVlcnlTZWxlY3RvcihcIi5vcmRlci1pdGVtX19wcmljZVwiKS50ZXh0Q29udGVudDtcbiAgICAgIG9yZGVyU3RyaW5nID0gYCR7b3JkZXJTdHJpbmd9ICR7b3JkZXJOYW1lfSAtICR7b3JkZXJQcmljZX0uICBgXG4gICAgfSk7XG4gICAgbGV0IHRvdGFsU3RyaW5nID0gYNCS0YHQtdCz0L46ICR7dG90YWxQcmljZX1gO1xuICAgIG9yZGVyU3RyaW5nICs9IHRvdGFsU3RyaW5nO1xuICAgIHVzZXJPcmRlckZpZWxkLnZhbHVlID0gb3JkZXJTdHJpbmc7XG4gICAgY29uc29sZS5sb2codXNlck9yZGVyRmllbGQudmFsdWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlVG90YWxOdW1iZXIoKSB7XG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIub3JkZXItaXRlbV9fcHJpY2VcIikpIHtcbiAgICAgIGNvbnN0IGFsbE9yZGVyc051bXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm9yZGVyLWl0ZW1fX3ByaWNlXCIpO1xuICAgICAgY29uc3QgdG90YWxOdW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm9yZGVyVG90YWxQcmljZVwiKTtcbiAgICAgIGxldCB0b3RhbFN1bSA9IDA7XG4gICAgICBhbGxPcmRlcnNOdW1zLmZvckVhY2gocHJpY2UgPT4ge1xuICAgICAgICB2YXIgcmVhbFByaWNlID0gcGFyc2VJbnQocHJpY2UudGV4dENvbnRlbnQpXG4gICAgICAgIHRvdGFsU3VtICs9IHJlYWxQcmljZTtcbiAgICAgIH0pXG4gICAgICBsZXQgdG90YWxOdW1GaW5hbCA9IHRvdGFsTnVtLmNoaWxkTm9kZXNbMF07XG4gICAgICB0b3RhbE51bUZpbmFsLm5vZGVWYWx1ZSA9IHRvdGFsU3VtICsgJyAnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IHRvdGFsTnVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvcmRlclRvdGFsUHJpY2VcIik7XG4gICAgICBsZXQgdG90YWxTdW0gPSAwO1xuICAgICAgbGV0IHRvdGFsTnVtRmluYWwgPSB0b3RhbE51bS5jaGlsZE5vZGVzWzBdO1xuICAgICAgdG90YWxOdW1GaW5hbC5ub2RlVmFsdWUgPSB0b3RhbFN1bSArICcgJztcbiAgICB9XG4gIH1cbiAgc2V0VGltZW91dCh1cGRhdGVUb3RhbE51bWJlciwgMTAwKVxuICBzZXRUaW1lb3V0KHVwZGF0ZVVzZXJPcmRlckZpZWxkLCAxMDApXG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAkKFwiI3VzZXJQaG9uZVwiKS5pbnB1dG1hc2soKTtcbiAgfSk7XG5cbn1cblxuXG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC1mZWVkYmFja1wiKSkge1xuICBjb25zdCBkYXJrTGF5ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRhcmstbGF5ZXJcIik7XG4gIGNvbnN0IGFwcGx5QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtZmVlZGJhY2tcIik7XG4gIGNvbnN0IGNsb3NlRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2xvc2VGb3JtXCIpO1xuICBjb25zdCBhcHBseUZvcm1TY3JlZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFwcGx5Rm9ybVwiKTtcbiAgYXBwbHlCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcblxuICAgIGRhcmtMYXllci5jbGFzc0xpc3QudG9nZ2xlKFwianMtLWhpZGRlblwiKTtcbiAgfSlcblxuICBjbG9zZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBkYXJrTGF5ZXIuY2xhc3NMaXN0LnRvZ2dsZShcImpzLS1oaWRkZW5cIik7XG4gIH0pO1xuXG4gIHdpbmRvdy5vbmNsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PSBkYXJrTGF5ZXIpIHtcbiAgICAgIGRhcmtMYXllci5jbGFzc0xpc3QudG9nZ2xlKFwianMtLWhpZGRlblwiKTtcbiAgICB9XG4gIH07XG59XG5cblxuaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKFwiZmVlZGJhY2tcIikpIHtcbiAgY29uc3QgcmV2aWV3cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mZWVkYmFjay1pdGVtJyk7XG4gIHJldmlld3MuZm9yRWFjaChyZXZpZXcgPT4ge1xuICAgIGxldCByZXZpZXdfY29udGVudCA9IHJldmlldy5xdWVyeVNlbGVjdG9yKCcuZmVlZGJhY2staXRlbV9fY29udGVudCcpLnRleHRDb250ZW50O1xuICAgIGNvbnN0IGJhdGhfdHlwZV9uYW1lID0gcmV2aWV3LnF1ZXJ5U2VsZWN0b3IoJy5mZWVkYmFjay1pdGVtX19jYXB0aW9uJyk7XG4gICAgY29uc3Qgc3Rhcl9yYXRpbmdfYW1vdW50ID0gcmV2aWV3LnF1ZXJ5U2VsZWN0b3IoJy5hbW91bnQnKTtcbiAgICBjb25zdCBzdGFyX3JhdGluZyA9IHJldmlld19jb250ZW50LnN1YnN0cmluZyhyZXZpZXdfY29udGVudC5pbmRleE9mKFwic3RhclwiKSAtIDEsIHJldmlld19jb250ZW50LmluZGV4T2YoXCJzdGFyXCIpKTtcbiAgICBjb25zdCBiYXRoX3R5cGUgPSByZXZpZXdfY29udGVudC5zdWJzdHJpbmcocmV2aWV3X2NvbnRlbnQuaW5kZXhPZihcImJhdGhcIikgLSAzLCByZXZpZXdfY29udGVudC5pbmRleE9mKFwiYmF0aFwiKSk7XG4gICAgcmV2aWV3X2NvbnRlbnQgPSByZXZpZXdfY29udGVudC5yZXBsYWNlKGAke2JhdGhfdHlwZX1iYXRoYCwgJycpXG4gICAgcmV2aWV3X2NvbnRlbnQgPSByZXZpZXdfY29udGVudC5yZXBsYWNlKGAke3N0YXJfcmF0aW5nfXN0YXJgLCAnJylcbiAgICByZXZpZXcucXVlcnlTZWxlY3RvcignLmZlZWRiYWNrLWl0ZW1fX2NvbnRlbnQnKS50ZXh0Q29udGVudCA9IHJldmlld19jb250ZW50O1xuICAgIHN0YXJfcmF0aW5nX2Ftb3VudC50ZXh0Q29udGVudCA9IHN0YXJfcmF0aW5nXG4gICAgYmF0aF90eXBlX25hbWUudGV4dENvbnRlbnQgPSBiYXRoX3R5cGVcbiAgICBzd2l0Y2ggKGJhdGhfdHlwZSkge1xuICAgICAgY2FzZSAn0KPRgNCwJzpcbiAgICAgICAgYmF0aF90eXBlX25hbWUudGV4dENvbnRlbnQgPSAn0KPRgNCw0LvRjNGB0LrQsNGPJ1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ9Ce0YXQvic6XG4gICAgICAgIGJhdGhfdHlwZV9uYW1lLnRleHRDb250ZW50ID0gJ9Ce0YXQvtGC0L3QuNGH0YzRjydcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICfQr9C80YEnOlxuICAgICAgICBiYXRoX3R5cGVfbmFtZS50ZXh0Q29udGVudCA9ICfQr9C80YHQutCw0Y8nXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAn0KDRi9CxJzpcbiAgICAgICAgYmF0aF90eXBlX25hbWUudGV4dENvbnRlbnQgPSAn0KDRi9Cx0LDRhtC60LDRjydcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICfQoNCw0LcnOlxuICAgICAgICBiYXRoX3R5cGVfbmFtZS50ZXh0Q29udGVudCA9ICfQoNCw0LfQtNC+0LvRjNC90LDRjydcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICfQodC10LwnOlxuICAgICAgICBiYXRoX3R5cGVfbmFtZS50ZXh0Q29udGVudCA9ICfQodC10LzQtdC50L3QsNGPJ1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ9Ch0LjQsSc6XG4gICAgICAgIGJhdGhfdHlwZV9uYW1lLnRleHRDb250ZW50ID0gJ9Ch0LjQsdC40YDRgdC60LDRjydcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICfQm9C10YEnOlxuICAgICAgICBiYXRoX3R5cGVfbmFtZS50ZXh0Q29udGVudCA9ICfQm9C10YHQvdCw0Y8nXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAn0KXRg9GCJzpcbiAgICAgICAgYmF0aF90eXBlX25hbWUudGV4dENvbnRlbnQgPSAn0KXRg9GC0L7RgNC+0LonXG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSlcbn1cbnltYXBzLnJlYWR5KGluaXQpO1xuXG5mdW5jdGlvbiBpbml0KCkge1xuICB2YXIgbXlNYXAgPSBuZXcgeW1hcHMuTWFwKCdtYXAnLCB7XG4gICAgY2VudGVyOiBbNTYuODExMjIzNTUsIDYwLjcyNzYzNzA4XSxcbiAgICB6b29tOiAxNFxuICB9KSxcblxuICAgIG15UGxhY2VtYXJrID0gbmV3IHltYXBzLlBsYWNlbWFyayhteU1hcC5nZXRDZW50ZXIoKSwge1xuICAgICAgYmFsbG9vbkNvbnRlbnQ6ICfQsy4g0JXQutCw0YLQtdGA0LjQvdCx0YPRgNCzLCDRg9C7LiDQm9C10YLQvdGP0Y8sIDIwJyxcbiAgICAgIGljb25DYXB0aW9uOiAn0LMuINCV0LrQsNGC0LXRgNC40L3QsdGD0YDQsywg0YPQuy4g0JvQtdGC0L3Rj9GPLCAyMCcsXG4gICAgfSwge1xuICAgICAgaWNvbkxheW91dDogJ2RlZmF1bHQjaW1hZ2UnLFxuICAgICAgaWNvbkltYWdlSHJlZjogXCIuL2Fzc2V0cy9pbWFnZXMvY29udGVudC9sb2dvLnN2Z1wiLFxuICAgICAgaWNvbkltYWdlU2l6ZTogWzMwLCA0Ml0sXG4gICAgICBpY29uSW1hZ2VPZmZzZXQ6IFstNSwgLTM4XSxcbiAgICB9KVxuXG4gIG15TWFwLmdlb09iamVjdHNcbiAgICAuYWRkKG15UGxhY2VtYXJrKTtcbn0iLCJqUXVlcnkoXCIjc2xpZGVyXCIpLnNsaWRlcih7XG4gICAgYW5pbWF0ZTogXCJmYXN0XCIsXG4gICAgbWF4OiA1LFxuICAgIG1pbjogMSxcbiAgICBzdGVwOiAxLFxuICAgIHJhbmdlOiB0cnVlLFxuICAgIHZhbHVlczogWzEsIDVdLFxuICAgIHNsaWRlOiBmdW5jdGlvbiAoZXZlbnQsIHVpKSB7XG4gICAgICAgICQoXCIjc3RhclJhdGluZ1wiKS52YWwodWkudmFsdWUpO1xuICAgICAgICAkKFwiLmNvbnRyb2xzLXNlY3Rpb25fX2J1dHRvblwiKS5yZW1vdmVDbGFzcyhcImpzLS1oaWRkZW5cIik7XG4gICAgICAgIGZpbHRlckZlZWRiYWNrc0J5UmF0aW5nKClcbiAgICB9XG59KTtcblxuaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmF0aW5nRm9ybVwiKSkge1xuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJhdGluZ0Zvcm1cIik7XG4gICAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYXRoVHlwZVwiKTtcbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldFwiLCAoKSA9PiB7XG4gICAgICAgICQoXCIjc2xpZGVyXCIpLnNsaWRlcihcInZhbHVlc1wiLCBbMSwgNV0pXG4gICAgICAgICQoXCIuY29udHJvbHMtc2VjdGlvbl9fYnV0dG9uXCIpLmFkZENsYXNzKFwianMtLWhpZGRlblwiKTtcblxuICAgICAgICB2YXIgYWxsRmVlZGJhY2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZlZWRiYWNrLWl0ZW0nKTtcbiAgICAgICAgYWxsRmVlZGJhY2tzLmZvckVhY2goZmVlZGJhY2sgPT4ge1xuXG4gICAgICAgICAgICBmZWVkYmFjay5jbGFzc0xpc3QucmVtb3ZlKFwianMtLWhpZGRlblwiKTtcbiAgICAgICAgfSk7XG4gICAgfSlcbiAgICBzZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoKSA9PiB7XG4gICAgICAgICQoXCIuY29udHJvbHMtc2VjdGlvbl9fYnV0dG9uXCIpLnJlbW92ZUNsYXNzKFwianMtLWhpZGRlblwiKVxuICAgICAgICB2YXIgY2hlY2tlZE9wdGlvbiA9ICQoc2VsZWN0KS52YWwoKTtcbiAgICAgICAgZmlsdGVyRmVlZGJhY2tzQnlOYW1lKGNoZWNrZWRPcHRpb24pXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGZpbHRlckZlZWRiYWNrc0J5UmF0aW5nKCkge1xuICAgIHZhciBhbGxGZWVkYmFja3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmVlZGJhY2staXRlbScpO1xuICAgIHZhciBzdGFyUmF0aW5nID0gJChcIiNzbGlkZXJcIikuc2xpZGVyKFwidmFsdWVzXCIpO1xuXG4gICAgYWxsRmVlZGJhY2tzLmZvckVhY2goZmVlZGJhY2sgPT4ge1xuICAgICAgICBpZiAoZmVlZGJhY2sucXVlcnlTZWxlY3RvcihcIi5hbW91bnRcIikudGV4dENvbnRlbnQgIT1cbiAgICAgICAgICAgICQoXCIjc3RhclJhdGluZ1wiKS52YWwoKSkge1xuICAgICAgICAgICAgZmVlZGJhY2suY2xhc3NMaXN0LmFkZChcImpzLS1oaWRkZW5cIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmZWVkYmFjay5jbGFzc0xpc3QucmVtb3ZlKFwianMtLWhpZGRlblwiKTtcbiAgICAgICAgfVxuICAgIH0pXG5cbn1cbmZ1bmN0aW9uIGZpbHRlckZlZWRiYWNrc0J5TmFtZShjaGVja2VkVmFsdWUpIHtcbiAgICB2YXIgYWxsRmVlZGJhY2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZlZWRiYWNrLWl0ZW0nKTtcbiAgICBhbGxGZWVkYmFja3MuZm9yRWFjaChmZWVkYmFjayA9PiB7XG5cbiAgICAgICAgaWYgKGZlZWRiYWNrLnF1ZXJ5U2VsZWN0b3IoXCIuZmVlZGJhY2staXRlbV9fY2FwdGlvblwiKS50ZXh0Q29udGVudCAhPSBjaGVja2VkVmFsdWUpIHtcbiAgICAgICAgICAgIGZlZWRiYWNrLmNsYXNzTGlzdC5hZGQoXCJqcy0taGlkZGVuXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmVlZGJhY2suY2xhc3NMaXN0LnJlbW92ZShcImpzLS1oaWRkZW5cIik7XG4gICAgICAgIH1cbiAgICB9KVxufSIsImNvbnN0IHN3aXBlciA9IG5ldyBTd2lwZXIoJyN3b3JrZXJTd2lwZXInLCB7XG4gICAgLy8gT3B0aW9uYWwgcGFyYW1ldGVyc1xuICAgIGRpcmVjdGlvbjogJ2hvcml6b250YWwnLFxuICAgIGxvb3A6IHRydWUsXG4gICAgc3BlZWQ6IDQwMCxcbiAgICBzcGFjZUJldHdlZW46IDM0LFxuICAgIGVmZmVjdDogJ2NhcmRzJyxcbiAgICBzbGlkZXNQZXJWaWV3OiAnNCcsXG4gICAgc3dpcGVIYW5kbGVyOiAnLnN3aXBlci13cmFwcGVyJyxcbn0pO1xuY29uc3Qgc3dpcGVySW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5iYXRocm9vbS1wcmV2aWV3XCIpO1xubGV0IGltZ0xpbmtBcnJheSA9IG5ldyBBcnJheSgpO1xubGV0IHJldHVyblZhbHVlID0gMDtcbnN3aXBlckltYWdlcy5mb3JFYWNoKGltYWdlID0+IHtcbiAgICBjb25zdCBpbWFnZVNyYyA9IGltYWdlLnNyYy5yZXBsYWNlKFwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCIsIFwiLlwiKTtcbiAgICB2YXIgcmV0dXJuVmFsdWUgPSBgPGltZyBjbGFzcz1cInN3aXBlci1wcmV2aWV3IHN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldFwiIHNyYz0ke2ltYWdlU3JjfT5gO1xuICAgIGltZ0xpbmtBcnJheS5wdXNoKHJldHVyblZhbHVlKVxufSlcblxuY29uc3QgZmFuY3lTd2lwZXIgPSBuZXcgU3dpcGVyKCcjZmFuY3lTd2lwZXInLCB7XG4gICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXG4gICAgbG9vcDogdHJ1ZSxcbiAgICBzcGVlZDogNTAwLFxuICAgIHNwYWNlQmV0d2VlbjogMzQsXG4gICAgZWZmZWN0OiAnZmFkZScsXG4gICAgZmFkZUVmZmVjdDoge1xuICAgICAgICBjcm9zc0ZhZGU6IHRydWVcbiAgICB9LFxuICAgIHNsaWRlc1BlclZpZXc6ICcxJyxcbiAgICBzd2lwZUhhbmRsZXI6ICcuc3dpcGVyLXdyYXBwZXInLFxuICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24nLFxuICAgICAgICBjbGlja2FibGU6IHRydWUsXG4gICAgICAgIHJlbmRlckJ1bGxldDogZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gaW1nTGlua0FycmF5W2luZGV4XTtcbiAgICAgICAgfSxcbiAgICB9XG59KTtcblxuY29uc3QgY2FmZVN3aXBlciA9IG5ldyBTd2lwZXIoJyNjYWZlU3dpcGVyJywge1xuICAgIC8vIE9wdGlvbmFsIHBhcmFtZXRlcnNcbiAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcbiAgICBsb29wOiBmYWxzZSxcbiAgICBzcGVlZDogNDAwLFxuICAgIHNwYWNlQmV0d2VlbjogMjQsXG4gICAgZWZmZWN0OiAnY2FyZHMnLFxuICAgIHNsaWRlc1BlclZpZXc6ICcyJyxcbiAgICAvLyBzd2lwZUhhbmRsZXI6ICcuc3dpcGVyLXdyYXBwZXInLFxuICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24nLFxuICAgICAgICBjbGlja2FibGU6IHRydWVcbiAgICB9LFxuXG4gICAgLy8gTmF2aWdhdGlvbiBhcnJvd3NcbiAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgIG5leHRFbDogJy5zd2lwZXItYnV0dG9uLW5leHQnLFxuICAgICAgICBwcmV2RWw6ICcuc3dpcGVyLWJ1dHRvbi1wcmV2JyxcbiAgICB9LFxufSk7XG5cbmNvbnN0IGFjdGlvblN3aXBlciA9IG5ldyBTd2lwZXIoJyNhY3Rpb25Td2lwZXInLCB7XG4gICAgLy8gT3B0aW9uYWwgcGFyYW1ldGVyc1xuICAgIGRpcmVjdGlvbjogJ2hvcml6b250YWwnLFxuICAgIGxvb3A6IHRydWUsXG4gICAgc3BlZWQ6IDQwMCxcbiAgICBzcGFjZUJldHdlZW46IDI0LFxuICAgIGVmZmVjdDogJ2NhcmRzJyxcbiAgICBzbGlkZXNQZXJWaWV3OiAnMicsXG5cbiAgICAvLyBOYXZpZ2F0aW9uIGFycm93c1xuICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgbmV4dEVsOiAnLnN3aXBlci1idXR0b24tbmV4dCcsXG4gICAgICAgIHByZXZFbDogJy5zd2lwZXItYnV0dG9uLXByZXYnLFxuICAgIH0sXG59KTsiXX0=
